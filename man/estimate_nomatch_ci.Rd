% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/estimate_nomatch_ci.R
\name{estimate_nomatch_ci}
\alias{estimate_nomatch_ci}
\title{Estimate bootstrapped confidence intervals for proposed VE estimator}
\usage{
estimate_nomatch_ci(
  data,
  outcome_name,
  event_name,
  trt_name,
  time_name,
  adjust_vars,
  weighting,
  times,
  censor_time,
  tau,
  boot_formula_0 = NULL,
  boot_formula_1 = NULL,
  matched_data = NULL,
  gp_list,
  confint_type,
  limit_type,
  n_boot,
  pt_est = NULL,
  alpha = 0.05,
  return_boot = TRUE,
  n_cores = 1
)
}
\arguments{
\item{data}{A data frame with one row per individual containing
the columns named in \code{outcome_name}, \code{event_name}, \code{trt_name}, \code{time_name},
and any variables listed in \code{adjust_vars}.}

\item{outcome_name}{Name of the possibly-censored time-to-event variable, measured from the chosen time origin.}

\item{event_name}{Name of the event indicator. The underlying column should be numeric
(\code{1} = event, \code{0} = censored).}

\item{trt_name}{Name of the exposure indicator. The underlying column should be numeric
(\code{1} = exposed during follow-up, \code{0} = never exposed during follow-up). Exposure indicator
should indicate whether an individual is exposed while uncensored and before experiencing the endpoint of interest.}

\item{time_name}{Name of the time to exposure, measured from the chosen time origin; use \code{NA} if not exposed.}

\item{adjust_vars}{Character vector of baseline covariates to adjust for when fitting the hazard models.}

\item{weighting}{Character string specifying the type of marginalizing weights to use.
Either:
\itemize{
\item \code{"observed"} (default): use the empirical distribution of time to exposure and covariates among the exposed as the
marginalizing weights. This provides close alignment with the weights implicitly used in matching.
\item \code{"custom"}: use user-specified weights provided in the \code{custom_weights} argument
}}

\item{times}{Numeric vector of time after exposure at which to evaluate VE. All values must be greater than tau and
should reflect meaningful clinical timepoints (e.g., 30, 60, 90 days).}

\item{censor_time}{Time after exposure at which exposed
individuals are administratively censored during model fitting. Default:
\code{max(times)}. This is used to limit borrowing of information from beyond the time period of interest.}

\item{tau}{Time after exposure (vaccination)  to exclude as part of an "immune build-up" period. Must be non-negative.
Common values may include 0 days (no delay), 7 days (one week), 14 days (two weeks) and should
match the biological understanding of when vaccine-induced immunity develops.}

\item{boot_formula_0}{A formula for estimating hazards in
unvaccinated group for bootstrap samples (not a model)}

\item{boot_formula_1}{A formula for estimating hazards in
vaccinated group for bootstrap samples (not a model)}

\item{matched_data}{A data frame representing the matched cohort}

\item{gp_list}{List of two dataframes named \code{g_dist} and \code{p_dist} representing
the marginalizing distributions to use.}

\item{confint_type}{Method for constructing confidence intervals.
One of \code{"wald"}, \code{"percentile"}, or \code{"both"}.
\itemize{
\item \code{"wald"}: Computes Wald-style intervals using bootstrap standard errors.
\item \code{"percentile"}: Computes percentile bootstrap intervals.
\item \code{"both"}: Computes and returns both sets of intervals.
Default: \code{"wald"}. See \strong{Confidence intervals} section.
}}

\item{n_boot}{Number of bootstrap replicates for confidence intervals.
Recommended to use at least 1000 for publication-quality results. Use smaller values (e.g., 10-100) for initial exploration.
Default: \code{0} (no bootstrapping).}

\item{pt_est}{A matrix of estimates. The columns of the matrix are the cumulative
incidence/VE terms and the rows are the requested timepoints for evaluation.}

\item{alpha}{Significance level for confidence intervals (Confidence level = 100*(1-\code{alpha})\%). Default: \code{0.05}.}

\item{return_boot}{Logical; return bootstrap draws in \code{boot_samples}?
Default: \code{TRUE}. Must be set to \code{TRUE} if user plans to use \code{\link[=add_simultaneous_ci]{add_simultaneous_ci()}}
to obtain simultaneous confidence intervals.}

\item{n_cores}{Integer; parallel cores for bootstrapping. Passed to
\code{parallel::mclapply} as \code{mc.cores}. On Unix-like OS only; not available on
Windows. Default: \code{1}.}
}
\value{
A list containing the following:
\describe{
\item{ci_estimates}{A list of matrices containing the lower and upper confidence interval bounds and
bootstrap standard error for each term. When \code{confint_type = "wald"}, the bootstrapped standard errors
on the transformed scale are also included.}
\item{n_success_boot}{The number of bootstrap samples used to compute confidence interval}
\item{boot_samples}{A matrix containing estimates from all bootstrap replications. Rows
represent bootstrap iterations, columns the term estimated.}
}
}
\description{
Estimate bootstrapped confidence intervals for proposed VE estimator
}
\keyword{internal}
