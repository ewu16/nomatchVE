<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Estimate observed distributions of exposure eval_times and covariates — get_observed_weights • nomatchVE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate observed distributions of exposure eval_times and covariates — get_observed_weights"><meta name="description" content="Computes two empirical probability distributions used to marginalize
time- and covariate- specific cumulative incidences:
\(g(d \mid x)\): the distribution of exposure eval_times within each covariate subgroup
of exposed individuals who remain at risk tau days after exposure.
\(p(x)\): the distribution of covariates among exposed individuals
who remain at risk tau days after exposure.


Called internally by nomatchVE(). Provided as an example of the
structure needed if a user passes in custom_weights."><meta property="og:description" content="Computes two empirical probability distributions used to marginalize
time- and covariate- specific cumulative incidences:
\(g(d \mid x)\): the distribution of exposure eval_times within each covariate subgroup
of exposed individuals who remain at risk tau days after exposure.
\(p(x)\): the distribution of covariates among exposed individuals
who remain at risk tau days after exposure.


Called internally by nomatchVE(). Provided as an example of the
structure needed if a user passes in custom_weights."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nomatchVE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ewu16/nomatchVE/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Estimate observed distributions of exposure eval_times and covariates</h1>
      <small class="dont-index">Source: <a href="https://github.com/ewu16/nomatchVE/blob/main/R/get_marginalizing_weights.R" class="external-link"><code>R/get_marginalizing_weights.R</code></a></small>
      <div class="d-none name"><code>get_observed_weights.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Computes two empirical probability distributions used to marginalize
time- and covariate- specific cumulative incidences:</p><ul><li><p>\(g(d \mid x)\): the distribution of exposure eval_times within each covariate subgroup
of exposed individuals who remain at risk <code>tau</code> days after exposure.</p></li>
<li><p>\(p(x)\): the distribution of covariates among exposed individuals
who remain at risk <code>tau</code> days after exposure.</p></li>
</ul><p>Called internally by <code><a href="nomatchVE.html">nomatchVE()</a></code>. Provided as an example of the
structure needed if a user passes in <code>custom_weights</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_observed_weights</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">outcome_time</span>,</span>
<span>  <span class="va">exposure</span>,</span>
<span>  <span class="va">exposure_time</span>,</span>
<span>  <span class="va">covariates</span>,</span>
<span>  <span class="va">tau</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame with one row per individual containing the columns
named in <code>outcome_time</code>, <code>outcome_status</code>, <code>exposure</code>, <code>exposure_time</code>, and any
variables listed in <code>covariates</code>.</p></dd>


<dt id="arg-outcome-time">outcome_time<a class="anchor" aria-label="anchor" href="#arg-outcome-time"></a></dt>
<dd><p>Name of the time-to-event/censoring variable. Time should
be measured from a given time origin (e.g. study start, enrollment, or age)
for all individuals.</p></dd>


<dt id="arg-exposure">exposure<a class="anchor" aria-label="anchor" href="#arg-exposure"></a></dt>
<dd><p>Name of the exposure indicator. The underlying column should
be numeric (<code>1</code> = exposed during follow-up, <code>0</code> = never exposed during
follow-up).</p></dd>


<dt id="arg-exposure-time">exposure_time<a class="anchor" aria-label="anchor" href="#arg-exposure-time"></a></dt>
<dd><p>Name of the time to exposure, measured from the chosen time
origin; use <code>NA</code> if not exposed. Time must be measured in the same units
(e.g. days) as that used for  <code>outcome_time</code>.</p></dd>


<dt id="arg-covariates">covariates<a class="anchor" aria-label="anchor" href="#arg-covariates"></a></dt>
<dd><p>Character vector of covariates to adjust for when fitting
the hazard models. These covariates should include all known confounders of
exposure and censoring measured at the chosen time origin.</p></dd>


<dt id="arg-tau">tau<a class="anchor" aria-label="anchor" href="#arg-tau"></a></dt>
<dd><p>Non-negative numeric value specifying the time after exposure that
should be excluded from the risk evaluation period. This argument is
primarily intended for vaccination exposures, where it is common to exclude
the time after vaccination when immunity is still building. Time must be
measured in the same units as that used for <code>outcome_time</code> and <code>exposure_time</code>
and should reflect the biological understanding of when vaccine-induced
immunity develops (usually 1-2 weeks). For non-vaccine exposures, <code>tau</code> can
be set to 0 (no delay period).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with two data frames:</p><ul><li><p><code>g_weights</code>: covariate-conditional exposure time  probabilities (\(g(d \mid x)\))</p></li>
<li><p><code>p_weights</code>: covariate probabilities (\(p(x)\))</p>
<p>Each data frame includes all variables in <code>covariates</code>, and a <code>prob</code> column
with empirical probabilities.
<code>g_weights</code> additionally includes a <code>&lt;exposure_time&gt;</code> column for exposure eval_times.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">weights</span> <span class="op">&lt;-</span> <span class="fu">get_observed_weights</span><span class="op">(</span><span class="va">simdata</span>, <span class="st">"Y"</span>, <span class="st">"V"</span>, <span class="st">"D_obs"</span>,</span></span>
<span class="r-in"><span>                                   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>, tau <span class="op">=</span> <span class="fl">14</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">weights</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ g_weights:'data.frame':	1010 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ x1   : int [1:1010] 0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ x2   : int [1:1010] 5 5 5 5 5 5 5 5 5 5 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ D_obs: num [1:1010] 2 3 4 5 6 7 8 9 10 11 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ prob : num [1:1010] 0.0256 0.022 0.011 0.0586 0.0183 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ p_weights:'data.frame':	14 obs. of  3 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ x1  : int [1:14] 0 0 0 0 0 0 0 1 1 1 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ x2  : int [1:14] 5 6 7 8 9 10 11 5 6 7 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ prob: num [1:14] 0.0675 0.0672 0.0705 0.064 0.0796 ...</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Emily Wu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

