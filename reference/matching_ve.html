<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute a matching-based estimator of VE with confidence intervals — matching_ve • nomatchVE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute a matching-based estimator of VE with confidence intervals — matching_ve"><meta name="description" content="This function is the main function for computing a matching-based estimator."><meta property="og:description" content="This function is the main function for computing a matching-based estimator."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nomatchVE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ewu16/nomatchVE/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute a matching-based estimator of VE with confidence intervals</h1>
      <small class="dont-index">Source: <a href="https://github.com/ewu16/nomatchVE/blob/main/R/matching_ve.R" class="external-link"><code>R/matching_ve.R</code></a></small>
      <div class="d-none name"><code>matching_ve.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is the main function for computing a matching-based estimator.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">matching_ve</span><span class="op">(</span></span>
<span>  <span class="va">matched_data</span>,</span>
<span>  <span class="va">outcome_time</span>,</span>
<span>  <span class="va">outcome_status</span>,</span>
<span>  <span class="va">exposure</span>,</span>
<span>  <span class="va">exposure_time</span>,</span>
<span>  <span class="va">tau</span>,</span>
<span>  <span class="va">eval_times</span>,</span>
<span>  effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vaccine_effectiveness"</span>, <span class="st">"risk_ratio"</span><span class="op">)</span>,</span>
<span>  ci_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wald"</span>, <span class="st">"percentile"</span>, <span class="st">"both"</span><span class="op">)</span>,</span>
<span>  boot_reps <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  keep_models <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  keep_boot_samples <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-matched-data">matched_data<a class="anchor" aria-label="anchor" href="#arg-matched-data"></a></dt>
<dd><p>A data frame for the matched cohort</p></dd>


<dt id="arg-outcome-time">outcome_time<a class="anchor" aria-label="anchor" href="#arg-outcome-time"></a></dt>
<dd><p>Name of the time-to-event/censoring variable. Time should
be measured from a given time origin (e.g. study start, enrollment, or age)
for all individuals.</p></dd>


<dt id="arg-outcome-status">outcome_status<a class="anchor" aria-label="anchor" href="#arg-outcome-status"></a></dt>
<dd><p>Name of the event indicator. The underlying column should be
numeric (<code>1</code> = event, <code>0</code> = censored).</p></dd>


<dt id="arg-exposure">exposure<a class="anchor" aria-label="anchor" href="#arg-exposure"></a></dt>
<dd><p>Name of the exposure indicator. The underlying column should
be numeric (<code>1</code> = exposed during follow-up, <code>0</code> = never exposed during
follow-up).</p></dd>


<dt id="arg-exposure-time">exposure_time<a class="anchor" aria-label="anchor" href="#arg-exposure-time"></a></dt>
<dd><p>Name of the time to exposure, measured from the chosen time
origin; use <code>NA</code> if not exposed. Time must be measured in the same units
(e.g. days) as that used for  <code>outcome_time</code>.</p></dd>


<dt id="arg-tau">tau<a class="anchor" aria-label="anchor" href="#arg-tau"></a></dt>
<dd><p>Non-negative numeric value specifying the time after exposure that
should be excluded from the risk evaluation period. This argument is
primarily intended for vaccination exposures, where it is common to exclude
the time after vaccination when immunity is still building. Time must be
measured in the same units as that used for <code>outcome_time</code> and <code>exposure_time</code>
and should reflect the biological understanding of when vaccine-induced
immunity develops (usually 1-2 weeks). For non-vaccine exposures, <code>tau</code> can
be set to 0 (no delay period).</p></dd>


<dt id="arg-eval-times">eval_times<a class="anchor" aria-label="anchor" href="#arg-eval-times"></a></dt>
<dd><p>Numeric vector specifying the timepoints at which to compute
cumulative incidence and the derived effect measures. The timepoints should
be expressed in terms of time since exposure. All values must be greater
than <code>tau</code> and and should correspond to clinically meaningful follow-up
durations, such as 30, 60, or 90 days after exposure. A fine grid of
timepoints (e.g., <code>eval_times = (tau+1):100</code>) can be provided if cumulative
incidence curves over time are desired.</p></dd>


<dt id="arg-effect">effect<a class="anchor" aria-label="anchor" href="#arg-effect"></a></dt>
<dd><p>Character. Type of effect measure to compute and return,
based on the estimated cumulative incidences. Either
<code>"vaccine_effectiveness"</code> (default) or <code>"risk_ratio"</code>.</p></dd>


<dt id="arg-ci-type">ci_type<a class="anchor" aria-label="anchor" href="#arg-ci-type"></a></dt>
<dd><p>Method for constructing bootstrap confidence intervals. One of
<code>"wald"</code>, <code>"percentile"</code>, or <code>"both"</code>.</p><ul><li><p><code>"wald"</code> (default): Computes Wald-style intervals using bootstrap standard errors.
See <strong>Confidence intervals</strong> section for details.</p></li>
<li><p><code>"percentile"</code>: Computes percentile bootstrap intervals.</p></li>
<li><p><code>"both"</code>: Computes and returns both sets of intervals.</p></li>
</ul></dd>


<dt id="arg-boot-reps">boot_reps<a class="anchor" aria-label="anchor" href="#arg-boot-reps"></a></dt>
<dd><p>Number of bootstrap replicates for confidence intervals.
Recommended to use at least 1000 for publication-quality results. Use
smaller values (e.g., 10-100) for initial exploration. Default: <code>0</code> (no
bootstrapping).</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Significance level for confidence intervals (Confidence level =
100*(1-<code>alpha</code>)%). Default: <code>0.05</code>.</p></dd>


<dt id="arg-keep-models">keep_models<a class="anchor" aria-label="anchor" href="#arg-keep-models"></a></dt>
<dd><p>Logical; return the two fitted hazard models used to compute
cumulative incidences?
Default: <code>TRUE</code>.</p></dd>


<dt id="arg-keep-boot-samples">keep_boot_samples<a class="anchor" aria-label="anchor" href="#arg-keep-boot-samples"></a></dt>
<dd><p>Logical; return bootstrap samples? Default:
<code>TRUE</code>. Must be set to <code>TRUE</code> if user plans to use <code><a href="add_simultaneous_ci.html">add_simultaneous_ci()</a></code>
to obtain simultaneous confidence intervals.</p></dd>


<dt id="arg-n-cores">n_cores<a class="anchor" aria-label="anchor" href="#arg-n-cores"></a></dt>
<dd><p>Integer; parallel cores for bootstrapping. Passed to
<code><a href="https://rdrr.io/r/parallel/mclapply.html" class="external-link">parallel::mclapply</a></code> as <code>mc.cores</code>. On Unix-like OS only; not available on
Windows. Default: <code>1</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing the following:</p><dl><dt>estimates</dt>
<dd><p>A list of matrices of the estimates at each timepoint. Rows of
each matrix are the terms "cuminc_0", "cuminc_1", "vaccine_effectiveness". Columns of each matrix
gives the point estimate and confidence intervals at the specified time point.</p></dd>

<dt>eval_times</dt>
<dd><p>The timepoints at which VE was evaluated</p></dd>

<dt>n_success_boot</dt>
<dd><p>A numeric vector of the number of successful bootstrap samples for each time point.(Success bootstrap samples are
those that result in non-missing valid point estimates.)</p></dd>

<dt>boot_samples</dt>
<dd><p>If <code>keep_boot_samples = TRUE</code>, a list of matrices for each term that contain the bootstrap estimates where the rows are the bootstrap iterations and
the columns are the time points.</p></dd>


</dl></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Emily Wu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

