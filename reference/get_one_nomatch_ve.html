<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Internal function to compute cumulative incidence and effect measures — get_one_nomatch_ve • nomatchVE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Internal function to compute cumulative incidence and effect measures — get_one_nomatch_ve"><meta name="description" content="This is an internal function that performs the actual estimation
of cumulative incidences and derived effect measures
using the G-computation style approach. It is called by nomatchVE() and one_boot_nomatch().
Users should typically call these functions rather than calling this function directly.
For historical reasons, this function handles more complex inputs than
exposed in the nomatchVE() interface. In particular, it includes
an options to
set censor time in hazard model for the exposed
weight by the weights from a matched dataset and
provide hazard model formulas or prefit objects

"><meta property="og:description" content="This is an internal function that performs the actual estimation
of cumulative incidences and derived effect measures
using the G-computation style approach. It is called by nomatchVE() and one_boot_nomatch().
Users should typically call these functions rather than calling this function directly.
For historical reasons, this function handles more complex inputs than
exposed in the nomatchVE() interface. In particular, it includes
an options to
set censor time in hazard model for the exposed
weight by the weights from a matched dataset and
provide hazard model formulas or prefit objects

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nomatchVE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ewu16/nomatchVE/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Internal function to compute cumulative incidence and effect measures</h1>
      <small class="dont-index">Source: <a href="https://github.com/ewu16/nomatchVE/blob/main/R/get_one_nomatch_ve.R" class="external-link"><code>R/get_one_nomatch_ve.R</code></a></small>
      <div class="d-none name"><code>get_one_nomatch_ve.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is an internal function that performs the actual estimation
of cumulative incidences and derived effect measures
using the G-computation style approach. It is called by <code><a href="nomatchVE.html">nomatchVE()</a></code> and <code><a href="one_boot_nomatch.html">one_boot_nomatch()</a></code>.
Users should typically call these functions rather than calling this function directly.
For historical reasons, this function handles more complex inputs than
exposed in the <code><a href="nomatchVE.html">nomatchVE()</a></code> interface. In particular, it includes
an options to</p><ul><li><p>set censor time in hazard model for the exposed</p></li>
<li><p>weight by the weights from a matched dataset and</p></li>
<li><p>provide hazard model formulas or prefit objects</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_one_nomatch_ve</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">outcome_time</span>,</span>
<span>  <span class="va">outcome_status</span>,</span>
<span>  <span class="va">exposure</span>,</span>
<span>  <span class="va">exposure_time</span>,</span>
<span>  <span class="va">covariates</span>,</span>
<span>  <span class="va">tau</span>,</span>
<span>  <span class="va">eval_times</span>,</span>
<span>  censor_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">eval_times</span><span class="op">)</span>,</span>
<span>  custom_gp_list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep_models <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  return_gp_list <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame with one row per individual containing the columns
named in <code>outcome_time</code>, <code>outcome_status</code>, <code>exposure</code>, <code>exposure_time</code>, and any
variables listed in <code>covariates</code>.</p></dd>


<dt id="arg-outcome-time">outcome_time<a class="anchor" aria-label="anchor" href="#arg-outcome-time"></a></dt>
<dd><p>Name of the time-to-event/censoring variable. Time should
be measured from a given time origin (e.g. study start, enrollment, or age)
for all individuals.</p></dd>


<dt id="arg-outcome-status">outcome_status<a class="anchor" aria-label="anchor" href="#arg-outcome-status"></a></dt>
<dd><p>Name of the event indicator. The underlying column should be
numeric (<code>1</code> = event, <code>0</code> = censored).</p></dd>


<dt id="arg-exposure">exposure<a class="anchor" aria-label="anchor" href="#arg-exposure"></a></dt>
<dd><p>Name of the exposure indicator. The underlying column should
be numeric (<code>1</code> = exposed during follow-up, <code>0</code> = never exposed during
follow-up).</p></dd>


<dt id="arg-exposure-time">exposure_time<a class="anchor" aria-label="anchor" href="#arg-exposure-time"></a></dt>
<dd><p>Name of the time to exposure, measured from the chosen time
origin; use <code>NA</code> if not exposed. Time must be measured in the same units
(e.g. days) as that used for  <code>outcome_time</code>.</p></dd>


<dt id="arg-covariates">covariates<a class="anchor" aria-label="anchor" href="#arg-covariates"></a></dt>
<dd><p>Character vector of covariates to adjust for when fitting
the hazard models. These covariates should include all known confounders of
exposure and censoring measured at the chosen time origin.</p></dd>


<dt id="arg-tau">tau<a class="anchor" aria-label="anchor" href="#arg-tau"></a></dt>
<dd><p>Non-negative numeric value specifying the time after exposure that
should be excluded from the risk evaluation period. This argument is
primarily intended for vaccination exposures, where it is common to exclude
the time after vaccination when immunity is still building. Time must be
measured in the same units as that used for <code>outcome_time</code> and <code>exposure_time</code>
and should reflect the biological understanding of when vaccine-induced
immunity develops (usually 1-2 weeks). For non-vaccine exposures, <code>tau</code> can
be set to 0 (no delay period).</p></dd>


<dt id="arg-eval-times">eval_times<a class="anchor" aria-label="anchor" href="#arg-eval-times"></a></dt>
<dd><p>Numeric vector specifying the timepoints at which to compute
cumulative incidence and the derived effect measures. The timepoints should
be expressed in terms of time since exposure. All values must be greater
than <code>tau</code> and and should correspond to clinically meaningful follow-up
durations, such as 30, 60, or 90 days after exposure. A fine grid of
timepoints (e.g., <code>eval_times = (tau+1):100</code>) can be provided if cumulative
incidence curves over time are desired.</p></dd>


<dt id="arg-censor-time">censor_time<a class="anchor" aria-label="anchor" href="#arg-censor-time"></a></dt>
<dd><p>Time after exposure at which exposed
individuals are administratively censored during model fitting. Default:
<code>max(eval_times)</code>. This limits estimation to the observed  period of interest and
prevents extrapolation beyond the largest evaluation time.
Typically, users should leave this at the default.</p></dd>


<dt id="arg-keep-models">keep_models<a class="anchor" aria-label="anchor" href="#arg-keep-models"></a></dt>
<dd><p>Logical; return the two fitted hazard models used to compute
cumulative incidences?
Default: <code>TRUE</code>.</p></dd>


<dt id="arg-return-gp-list">return_gp_list<a class="anchor" aria-label="anchor" href="#arg-return-gp-list"></a></dt>
<dd><p>Logical; return marginalizing weights? Default is
TRUE.</p></dd>


<dt id="arg-weights-source">weights_source<a class="anchor" aria-label="anchor" href="#arg-weights-source"></a></dt>
<dd><p>Character string specifying how to construct marginalizing weights.
One of:</p><ul><li><p><code>"observed"</code> (default): estimate weights from the observed data;</p></li>
<li><p><code>"custom"</code>: use user-specified weights provided via <code>custom_weights</code> argument;</p></li>
</ul></dd>


<dt id="arg-return-matching">return_matching<a class="anchor" aria-label="anchor" href="#arg-return-matching"></a></dt>
<dd><p>Logical; return matched datasets? Default is
TRUE if <code>weights_source = "matched"</code>. When <code>weights_source != "matched"</code>, this is
automatically set to <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List with components:</p><dl><dt>pt_estimates</dt>
<dd><p>Matrix of point estimates with one row per evaluation time and
one column per measure (<code>cuminc_0</code>, <code>cuminc_1</code>, <code>risk_ratio</code>,<code>vaccine_effectiveness</code>).</p></dd>

<dt>model_0, model_1</dt>
<dd><p>Fitted Cox models (if <code>keep_models = TRUE</code>)</p></dd>

<dt>gp_list</dt>
<dd><p>Marginalizing distributions (if <code>return_gp_list = TRUE</code>)</p></dd>


</dl></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Emily Wu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

